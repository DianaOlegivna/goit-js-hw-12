{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n      <a class=\"gallery-item\" href=\"${imgInfo.largeImageURL}\">\n        <div class=\"photo-card\">\n          <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p><b>Likes:</b> ${imgInfo.likes}</p>\n            <p><b>Views:</b> ${imgInfo.views}</p>\n            <p><b>Comments:</b> ${imgInfo.comments}</p>\n            <p><b>Downloads:</b> ${imgInfo.downloads}</p>\n          </div>\n        </div>\n        </a>`;\n};\n\n\n","import axios from \"axios\";\n\nconst API_KEY = '48302509-34d9f74736e571fd8f4b83a25';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: API_KEY,\n      q: searchedQuery,\n      per_page: 15,\n      page: currentPage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  };\n   \n  return axios.get(`${BASE_URL}`, axiosOptions);\n};\n","import { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchImages } from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\n\nlet page = 1;\nlet searchedQuery = '';\n\nlet lightbox = new SimpleLightbox('.gallery-item', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nconst toggleLoading = isLoading => {\n    if (isLoading) {\n        galleryEl.innerHTML = '<p>Loading images, please wait...</p>'; \n    } else {\n        galleryEl.innerHTML = '';\n    }\n};\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchedQuery === '') {\n      iziToast.error({ message: 'The search field cannot be empty!!' });\n\n      return;\n    }\n\n    page = 1;\n    toggleLoading(true);\n    loadMoreBtnEl.classList.add('is-hidden');\n\n    const { data } = await fetchImages(searchedQuery, page);\n\n    if (data.totalHits === 0) {\n        iziToast.warning({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n\n      galleryEl.innerHTML = '';\n\n      searchFormEl.reset();\n\n      return;\n    }\n\n    if (data.totalHits > 1) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n\n    galleryEl.innerHTML = galleryTemplate;\n     lightbox.refresh();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n\n    const { data } = await fetchImages(searchedQuery, page);\n\n    const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    const maxPages = Math.ceil(data.totalHits / 15);\n    if (page >= maxPages) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n    smoothScroll();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst smoothScroll = () => {\n  const { height: cardHeight } = galleryEl.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};"],"names":["createGalleryCardTemplate","imgInfo","API_KEY","BASE_URL","fetchImages","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loadMoreBtnEl","page","lightbox","SimpleLightbox","toggleLoading","isLoading","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","err","maxPages","smoothScroll","cardHeight"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChC;AAAA,sCAC6BA,EAAQ,aAAa;AAAA;AAAA,sBAErCA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,+BAEjCA,EAAQ,KAAK;AAAA,+BACbA,EAAQ,KAAK;AAAA,kCACVA,EAAQ,QAAQ;AAAA,mCACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,cCP9CC,EAAU,qCACVC,EAAW,2BAEJC,EAAc,CAACC,EAAeC,IAAgB,CACzD,MAAMC,EAAe,CACnB,OAAQ,CACN,IAAKL,EACL,EAAGG,EACH,SAAU,GACV,KAAMC,EACN,WAAY,QACZ,YAAa,aACb,WAAY,MACb,CACL,EAEE,OAAOE,EAAM,IAAI,GAAGL,CAAQ,GAAII,CAAY,CAC9C,ECdME,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAgB,SAAS,cAAc,mBAAmB,EAEhE,IAAIC,EAAO,EACPP,EAAgB,GAEhBQ,EAAW,IAAIC,EAAe,gBAAiB,CAC/C,aAAc,MACd,aAAc,GAClB,CAAC,EAED,MAAMC,EAAgBC,GAAa,CAE3BN,EAAU,UAAY,uCAI9B,EAEMO,EAAqB,MAAMC,GAAS,CACxC,GAAI,CAKF,GAJAA,EAAM,eAAc,EAEpBb,EAAgBa,EAAM,cAAc,SAAS,WAAW,MAAM,OAE1Db,IAAkB,GAAI,CACxBc,EAAS,MAAM,CAAE,QAAS,oCAAsC,CAAA,EAEhE,MACD,CAEDP,EAAO,EACPG,EAAc,EAAI,EAClBJ,EAAc,UAAU,IAAI,WAAW,EAEvC,KAAM,CAAE,KAAAS,CAAI,EAAK,MAAMhB,EAAYC,EAAeO,CAAI,EAEtD,GAAIQ,EAAK,YAAc,EAAG,CACtBD,EAAS,QAAQ,CACb,QAAS,0EACrB,CAAS,EAEHT,EAAU,UAAY,GAEtBD,EAAa,MAAK,EAElB,MACD,CAEGW,EAAK,UAAY,IACnBT,EAAc,UAAU,OAAO,WAAW,EAE1CA,EAAc,iBAAiB,QAASU,CAAkB,GAG5D,MAAMC,EAAkBF,EAAK,KAAK,IAAIG,GAAMvB,EAA0BuB,CAAE,CAAC,EAAE,KAAK,EAAE,EAElFb,EAAU,UAAYY,EACrBT,EAAS,QAAO,CAClB,OAAQW,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEAf,EAAa,iBAAiB,SAAUQ,CAAkB,EAE1D,MAAMI,EAAqB,MAAMH,GAAS,CACxC,GAAI,CACFN,IAEA,KAAM,CAAE,KAAAQ,CAAI,EAAK,MAAMhB,EAAYC,EAAeO,CAAI,EAEhDU,EAAkBF,EAAK,KAAK,IAAIG,GAAMvB,EAA0BuB,CAAE,CAAC,EAAE,KAAK,EAAE,EAElFb,EAAU,mBAAmB,YAAaY,CAAe,EAEzD,MAAMG,EAAW,KAAK,KAAKL,EAAK,UAAY,EAAE,EAC1CR,GAAQa,IACVd,EAAc,UAAU,IAAI,WAAW,EACvCA,EAAc,oBAAoB,QAASU,CAAkB,EAC7DF,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,GAEzFO,GACD,OAAQF,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEME,EAAe,IAAM,CACzB,KAAM,CAAE,OAAQC,CAAU,EAAKjB,EAAU,kBAAkB,wBAE3D,OAAO,SAAS,CACd,IAAKiB,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}