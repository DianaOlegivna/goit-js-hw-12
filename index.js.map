{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n      <a class=\"gallery-item\" href=\"${imgInfo.largeImageURL}\">\n        <div class=\"photo-card\">\n          <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p><b>Likes:</b> ${imgInfo.likes}</p>\n            <p><b>Views:</b> ${imgInfo.views}</p>\n            <p><b>Comments:</b> ${imgInfo.comments}</p>\n            <p><b>Downloads:</b> ${imgInfo.downloads}</p>\n          </div>\n        </div>\n        </a>`;\n};\n\n\n","import axios from \"axios\";\n\nconst API_KEY = '48302509-34d9f74736e571fd8f4b83a25';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: API_KEY,\n      q: searchedQuery,\n      per_page: 15,\n      page: currentPage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  };\n   \n  return axios.get(`${BASE_URL}`, axiosOptions);\n};\n","import { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchImages } from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\n\nlet page = 1;\nlet searchedQuery = '';\n\nlet lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst toggleLoadMoreBtn = show => {\n  if (show) {\n    loadMoreBtnEl.classList.remove('is-hidden');\n  } else {\n    loadMoreBtnEl.classList.add('is-hidden');\n  }\n};\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchedQuery === '') {\n      iziToast.error({ message: 'The search field cannot be empty!' });\n      return;\n    }\n\n    page = 1;\n    galleryEl.innerHTML = ''; \n    toggleLoadMoreBtn(false);\n\n    const { data } = await fetchImages(searchedQuery, page);\n\n    if (data.totalHits === 0) {\n      iziToast.warning({\n        message: 'No images found. Please try another search query!',\n      });\n      return;\n    }\n\n    const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n    galleryEl.innerHTML = galleryTemplate;\n    lightbox.refresh(); \n\n    if (data.hits.length < 15) {\n      toggleLoadMoreBtn(false);\n    } else {\n      toggleLoadMoreBtn(true);\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    iziToast.success({\n      message: `Hooray! We found ${data.totalHits} images.`,\n    });\n  } catch (err) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please check your internet connection or try again later.',\n    });\n    console.log('Error details:', err);\n  }\n};\n\nconst onLoadMoreBtnClick = async () => {\n  try {\n    page++;\n    const { data } = await fetchImages(searchedQuery, page);\n\n    const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    lightbox.refresh();\n\n    const maxPages = Math.ceil(data.totalHits / 15);\n    if (page >= maxPages || data.hits.length < 15) {\n      toggleLoadMoreBtn(false);\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n\n    smoothScroll();\n  } catch (err) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please check your internet connection or try again later.',\n    });\n    console.log('Error details:', err);\n  }\n};\n\nconst smoothScroll = () => {\n  const { height: cardHeight } = galleryEl.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n"],"names":["createGalleryCardTemplate","imgInfo","API_KEY","BASE_URL","fetchImages","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loadMoreBtnEl","page","lightbox","SimpleLightbox","toggleLoadMoreBtn","show","onSearchFormSubmit","event","iziToast","data","galleryTemplate","el","onLoadMoreBtnClick","err","maxPages","smoothScroll","cardHeight"],"mappings":"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"}